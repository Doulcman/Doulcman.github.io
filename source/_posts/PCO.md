---
title: Principles of Computer Organization
date: 2023-12-29 12:24:25
tags: 计组
---

# 选填

## 字、字节、位、比特

### (8) 某计算机字长是16位，它的存储容量是1MB，按字编址，它的寻址范围是( A )。 

A．512K； B．1M； C．512KB； D．1MB

1024 * 1024 * 8位 / 16位 = 512K

按字 （16）看题目，按双字（32）看题目。按字节（8）看选项，按比特（1）看选项。

字节就是Byte，位就是bit，比特就是bit

1字节 = 8位


### (117) 某容量为256M的存储器由若干个4 M ×8位DRAM 芯片构成，该DRAM芯片的地址引脚和数据引脚总数是（ D ）

A. 22    B. 30     C. 36     D. 19

2^22，DRAM芯片的地址线，在芯片中，是分时复用的，仅需要一半的引脚数，即够用。所以11 + 8.
地址线不减半？只有地址引脚减半？


## 多体交叉存储器

多体交叉存储器（MIMD，Multiple Instruction Multiple Data）是一种并行计算体系结构，它包含多个处理器核心和共享的存储器系统1。

多体交叉存储器主要解决了**提高主存储器的数据传输率**的问题。

## 微程序

(133) 某计算机的控制器采用微程序控制方式，微指令中的操作控制字段采用字段直接编码法，共用33个微命令，构成5个互斥类，分别包含7、3、12、5和6个微命令，则操作控制字段至少有（ C ）

A. 5位     B. 6位    C. 15位   D. 33位


1） 微操作类型
相容性微操作：同时或同一个CPU周期内可以并行执行的微操作。     
相斥性微操作：不能同时或在同一个CPU周期内并行执行的微操作 。
2） 微命令编码
直接控制法：微指令控制字段的一种编码方法，每个微命令占一位。
直接编码法：相斥的n个微命令可以采用编码法表示，占log2（n+1）位。
混合编码法：相斥微命令采用直接编码法，相容微命令采用直接控制法。
3） 7个互斥的微命令采用直接编码法至少需要log27+1位，即3位。
3个互斥的微命令采用直接编码法至少需要log23+1位，即2位。
12个互斥的微命令采用直接编码法至少需要log212+1位，即4位。
5个互斥的微命令采用直接编码法至少需要log25+1位，即3位。
6个互斥的微命令采用直接编码法至少需要log26+1位，即3位。
至少需要3+2+4+3+3=15位。答案为C


# 简答题

## 冯诺依曼计算机体系的基本思想

基本思想：
1. 采用二进制形式表示计算机中的数据和指令
2. 程序和数据放在同一存储器中，指令和数据一样可以送到运算器中运算。存储程序并按地址顺序执行。

按此思想设计的计算机硬件系统：由运算器、存储器、控制器、输入设备、输出设备五大基本部件。


## 计算机系统层次结构

它通常可有五个以上的不同级组成，每一个上都能进行程序设计。由下之上可排序为：
1. 微程序机器级
2. 传统机器级
3. 操作系统级
4. 汇报语言机器级
5. 高级语言机器级
6. 应用语言机器级


## 存储器的层次结构

存储器的层次结构主要体现在 Cache——主存和主存——辅存这两个存储层次上

Cache——主存层次在存储系统中主要对CPU访存起加速作用，即从整体运行的效果分析，CPU访存速度加快，接近于Cache的速度，而寻址空间和位阶却接近于主存。

主存——辅存层次在存储系统中主要起扩容作用，即从程序员的角度看，他所使用的存储器其容量和位阶接近于辅存，而速度接近于主存。

综合上述两个存储层次的作用，从整个存储系统来看，就达到了速度快，容量大、位阶低的优化效果。

主存与Cache之间的信息调度全由硬件自动完成。

而主存——辅存层次的调度目前广泛采用虚拟存储技术实现，即将主存和辅存的一部分通过软硬结合的技术组成虚拟存储器，程序员可以使用这个比主存实际空间
（物理地址空间）大得多的虚拟地址空间（逻辑地址空间）编程，当程序运行时，再由软、硬件自动配合完成虚拟地址空间与主存实际物理地址空间的转换。


## 为什么说现代计算机中主存储器处于全机中心地位?

1. 存储 处在运行中的指令和数据。
2. I/O设备数量增多，数据传输速度加快，因此采用了DMA技术和[通道技术](https://blog.csdn.net/qq_44824148/article/details/112058692)，在存储器和I/O设备间直接传输数据。
3. 共享存储器的多处理机出现，利用存储器存放共享数据，并实现处理机之间的通信，更加强了存储器作为全机中心的地位。


## 程序访问的局部性原理

时间局部性是指程序在最近的未来要使用的信息很可能是现在正在使用的信息。

空间局部性是指程序在最近的未来要使用的信息与现在正在使用的信息很可能在程序空间上是相邻或相近的。


## 高速缓存存储器

高速缓存存储器位于主存和 CPU 之间，用来存放当前正在执行的程序段和数据中活跃的部分，使CPU的访存操作大多数针对Cache进行，从而使程序的执行速度大大提升。

与主存的关系：高速缓存存储器保存的信息只是主存中最急需处理的若干块的副本。

工作过程：当CPU发出读请求时，如果Cache命中，就之间对Cache进行读操作，与主存无关；如果没命中，则仍需访问主存，并把该块信息一次从主存调入Cache内。
若此时Cache已满，则需根据某种替换算法，用这个块替换掉Cache中原来的某块信息。


### 地址映像方法

1. 全相联映像。 实现查询的机制复杂，代价高，速度慢。Cache空间利用率高，块冲突概率低，因而Cache的失效率低。
2. 直接映像。 实现查询的机制简单，速度快。Cache空间利用率低，块冲突概率高，因而Cache的失效率高。
3. 组相连映像。 组相连是直接映像和全相连映像的一种折衷。


## 段式虚拟存储器对程序员是否透明

虚拟管理是由软件（操作系统）和硬件共同完成的，由于软件的介入，虚存对实现存储管理系统程序不透明。而段是按照程序的自然分界划分的长度可以动态改变的区域。
通常，程序员把子程序、操作数和常数等不同类型的数据划分到不同的段中，并且每个程序可以有多个相同类型的段。

由于分段是程序员完成的，所以段式虚拟存储器对程序员而已不是透明的，但虚存到实存的地址映射是由系统软件辅助完成的，故对应用程序而言，
段式虚拟存储器是半透明的。


## 在一个进程的执行过程中，是否其所有页面都必须处在主存中？

在虚拟存储管理系统中，程序并不是一次整体装入内存才运行，所以不是所有页面都必须处在主存中，而是根据程序的局部性，有的页面在主存，有的页面在辅存。


## 请解释产生颠簸的原因，并说明防止颠簸的办法？

原因：分配的页面数太少、替换策略不佳

防止颠簸的办法：增加分配的页面数，选择LRU或更好的替换策略


## 页式虚拟存储器和段式虚拟存储器

页式虚拟存储器地址变换时可以用物理页号与页内偏移量直接拼接成物理地址

段式虚拟存储器地址变换时必须用段起址与段内偏移量相加才能得到物理地址。

由于物理页和虚拟页的页面大小相同，且为2的整数次幂，所以页式虚拟存储器地址变换时可以用物理页号与页内偏移量直接拼接成物理地址，
而段式虚拟存储器的各段大小不同，且段起始地址任意，所以必须用段起址与段内偏移量相加才能得到物理地址。


页式虚拟存储系统每个页面是分散存储的，为了实现信息共享和保护，页面之间需要一一对应起来，需要建立大量的页表项。

而段式虚拟存储系统中每个段都从0地址开始编址，并采用一段连续的地址空间。在实现信息共享和保护时，只需要为所共享和保护的程序设置一个段表项，
将其中的基地址与内存地址一一对应起来即可。

## 微命令、微操作、微程序

微命令是控制计算机各部件完成某个基本微操作的命令，微操作是指计算机中最基本的、不可再分解的操作。微命令和微操作是一一对应的，
微命令是微操作的控制信号，微操作是微命令的操作过程。

微指令是若干个微命令的集合。微程序是机器指令的实时解释器，每一条机器指令都对应一个微程序。

微程序和程序是两个不同的概念。微程序是由微指令组成的，用于描述机器指令，实际上是机器指令的实时解释器，微程序是由计算机的设计者事先编制的，
并存放在控制存储器中的，一般不提供给用户；程序是由机器指令组成的，由程序员事先编制好并存放在主存储器中。

微程序的控制思想：把指令执行所需要的所有控制信号存放在控制存储器中，需要时从这个存储器中读取，即把操作控制信号编成微指令，存放在控制存储器中。
一条机器指令的功能通常用许多微指令组成的序列来实现，这个微指令序列称为微程序。微指令在控制存储器中的存储位置称为微地址。

## 水平型微指令和垂直型微指令

水平型微指令是面向处理机内部控制逻辑的描述，而垂直型指令是面向算法的描述

1. 水平型微指令并行操作能力强，效率高，灵活性强，垂直型微指令差；
2. 水平型微指令执行一条指令的时间短；垂直型微指令执行时间长；
3. 由水平型微指令解释指令的微程序，具有微指令字比较长，但程序短的特点。垂直型微指令则相反，微指令比较短而微程序长；
4. 水平型微指令用户难以掌握。而垂直型微指令与指令比较相似，相对来说较容易掌握。


## 水平型微指令不是直接编码的微指令

因为水平型微指令是指一次能定义并执行多个并行操作的微命令：从编码方式看，直接编码，字段直接编码，字段间接编码以及直接和字段混合编码都属水平型微指令，
只要在一条微命令中定义并执行多个并行操作，就是水平型微指令。与编码方式无关，但直接编码速度最快，字段编码要经过译码，故速度受到影响。


## 主频

不能说机器主频越快，机器的速度就越快，因为机器的速度不仅与主频有关，还与数据通路结构、时序分配方案、ALU运算能力、指令功能强弱等多种因素有关，
要看综合效果。


## 指令周期、机器周期、时钟周期

指令周期是CPU每取出并执行一条指令所需的全部时间，也即CPU完成一条指令的时间，由于各种指令操作的功能不同，因此各种指令的指令周期也是不同的，
指令周期的长短主要和指令在执行阶段的访问主存的次数和执行阶段所需要完成的操作有关。

机器周期是所有指令执行过程中的一个基准时间，取决于指令的功能及其间的速度。

机器周期是为了实现指令流水线而引入的概念，实际上对应的是指令流水线的各个阶段，称之为流水阶段（或功能段，流水级等）。

时钟周期是用时钟信号来控制每一个微操作命令。一个机器周期内包含了若干个时钟周期，一个时钟周期内包含了若干个微操作命令。


## 取微指令的步骤

1. 指令地址送地址总线（PC->AB）
2. 发访存控制命令，从存储器取指令送数据总线（W/R#=0;M/IO#=1）
3. 指令送指令寄存器（DB->IR）
4. 程序寄存器+1（PC+1，ADS）


## 同步通信和异步通信

同步通信——由统一时间控制的通信，控制方式简单，灵活性差，当系统中各部件工作速度差异较大时，总线工作效率明显下降。适用于速度差别不大的场合

异步通信——不由统一时间控制的通信，部件间采用应答方式进行联系，控制方式较同步复杂，灵活性高，当系统中各部件工作速度差异较大时，有利用提高总线工作效率。


## I/O接口

需要I/O接口的原因：
1. 各种外设的操作方式不同，由CPU统一控制不切实际
2. 外设的数据传输速率比存储器和CPU慢，使得高速总线不能直接与外设相连。
3. 外设所使用的数据格式各不一致。

I/O接口是连接主机（CPU、主存）和外部设备的桥梁，其基本功能有
1. 控制和定时
2. CPU通信
3. 设备通信
4. 数据缓冲
5. 检错

常用的I/O编址方式：I/O与内存统一编址和I/O独立编址

I/O与内存统一编址方式的I/O地址采用与主存单元地址完全一样的格式，I/O设备和主存占用同一个地址空间，CPU可像访问主存一样访问I/O设备，不需要安排专门的I/O指令。

I/O独立编址方式时机器为I/O设备专门安排一套完全不同于主存地址格式的地址编码，此时I/O地址与主存地址是两个独立的空间，CPU需要通过专门的I/O指令来访问I/O地址空间。


## 三种通道

1. 字节多路通道：一种简单的共享通道，主要为多台低速或中速的外围设备服务。
2. 数组多路通道：适于为高速设备服务。
3. 选择通道：为多台高速外围设备（如磁盘存储器等）服务的。


## 中断

中断：计算机执行现行程序的过程中，出现某些急需处理的异常情况和特殊请求，CPU暂时中止现行程序，而转去对随机发生的更紧迫的事件进行处理，在处理完毕后，
CPU将自动返回原来的程序继续执行。

产生中断：外部设备（中断源）准备就绪后会主动向CPU发出中断请求。通常由外设的完成信号将相应的中断请求触发器置成“1”状态，表示该中断源向CPU提出中断请求。

DMA和中断的区别
1. 中断方式是程序切换，需要保护和恢复现场；而DMA方式除了开始和结尾时，不占用CPU任何资源。
2. 对中断请求的响应只能发生在每条指令执行完毕时，而对DMA请求的响应可以发生在每个机器周期结束时。
3. 中断传送过程需要CPU的干涉，而DMA传送过程中不需要CPU的干涉，故数据传送速率非常高，适合于高速外设的成组传送，DMA的请求有限级高于中断请求。


## 中断向量地址和入口地址

向量地址是硬件电路产生的中断源的内存地址编号，中断入口地址是中断服务程序首址。

中断向量地址和入口地址的联系：中断向量地址可理解为中断服务程序入口地址指示器（入口地址的地址），通过它访存可获得中断服务程序入口地址。


## 数据传送控制方式

常见的数据传送控制方式有：程序控制、中断控制、DMA、I/O通道控制、外围处理机控制。

CPU响应中断应具备的条件：CPU接收到中断请求信息。CPU允许中断。一条指令的执行完毕。


## 中断隐指令

CPU响应中断之后，经过某些操作，转去执行中断服务程序。这些操作是由硬件直接实现的，称为中断隐指令。中断隐指令并不是指令系统中的一条真正的指令，
它没有操作码，所以中断隐指令是一种不允许也不可能为用户使用的特殊指令。

所完成的操作主要有：保存断点。暂不允许中断。引入中断服务程序。


## 